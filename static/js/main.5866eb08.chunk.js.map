{"version":3,"sources":["config.js","decorate.js","cmds/login.js","cmds/logout.js","util.js","cmds/q1.js","cmds/q2.js","cmds/m1.js","cmds/m2.js","cmds/index.js","root.js","hooks/use-current-user.js","hooks/use-config.js","reportWebVitals.js","index.js"],"names":["fcl","put","httpSend","window","addEventListener","d","console","log","detail","delta","txId","subscribe","txStatus","data","LABEL","CMD","reauthenticate","unauthenticate","yup","tag","nope","error","a","query","cadence","then","catch","args","arg","t","Int","mutate","limit","Address","COMMANDS","LOGIN","LOGOUT","Q1","Q2","M1","M2","renderCommand","onClick","Root","currentUser","useState","setCurrentUser","useEffect","useCurrentUser","config","setConfig","useConfig","client","setClient","session","setSession","init","WalletConnectClient","projectId","relayUrl","metadata","name","description","url","icons","on","CLIENT_EVENTS","pairing","proposal","uri","signal","params","test","navigator","userAgent","location","assign","QRCodeModal","open","mobileLinks","created","deleted","handleSend","request","topic","method","result","handleWalletConnect","DEFAULT_APP_METADATA","connect","permissions","blockchain","chains","jsonrpc","methods","close","map","JSON","stringify","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5866eb08.chunk.js","sourcesContent":["import * as fcl from \"@onflow/fcl\"\nimport { send as httpSend } from \"@onflow/transport-http\"\nimport { send as grpcSend } from \"@onflow/transport-grpc\"\n\nconst USE_LOCAL = false\n\n// prettier-ignore\nfcl.config()\n  .put(\"app.detail.title\", \"Test Harness\")\n  .put(\"app.detail.icon\", \"https://placekitten.com/g/200/200\")\n  .put(\"service.OpenID.scopes\", \"email\")\n\nif (USE_LOCAL) {\n  // prettier-ignore\n  fcl\n    .config()\n    .put(\"env\", \"local\")\n    .put(\"accessNode.api\", \"http://localhost:8080\")\n    .put(\"sdk.transport\", grpcSend)\n    .put(\"discovery.wallet\", \"http://localhost:8701/fcl/authn\")\n} else {\n  // prettier-ignore\n  fcl\n    .config()\n    .put(\"env\", \"testnet\")\n    // http\n    .put(\"accessNode.api\", \"https://rest-testnet.onflow.org\")\n    .put(\"sdk.transport\", httpSend)\n    .put(\"discovery.authn.include\", [\"0x9d2e44203cb13051\"])\n    // grpc\n    // .put(\"accessNode.api\", \"https://access-testnet.onflow.org\")\n    // .put(\"sdk.transport\", grpcSend)\n    .put(\"discovery.wallet\", \"https://fcl-discovery.onflow.org/testnet/authn\")\n  // mainnet\n  //.put(\"accessNode.api\", \"https://access-mainnet-beta.onflow.org\")\n  //.put(\"discovery.wallet\", \"https://fcl-discovery.onflow.org/authn\")\n}\n","import * as fcl from \"@onflow/fcl\"\n\nwindow.fcl = fcl\n\nwindow.addEventListener(\"FLOW::TX\", d => {\n  console.log(\"FLOW::TX\", d.detail.delta, d.detail.txId)\n  fcl\n    .tx(d.detail.txId)\n    .subscribe(txStatus => console.log(\"TX:STATUS\", d.detail.txId, txStatus))\n})\n\nwindow.addEventListener(\"message\", d => {\n  console.log(\"Harness Message Received\", d.data)\n})\n","import {reauthenticate} from \"@onflow/fcl\"\n\nexport const LABEL = \"Log In\"\nexport const CMD = reauthenticate\n","import {unauthenticate} from \"@onflow/fcl\"\n\nexport const LABEL = \"Log Out\"\nexport const CMD = unauthenticate\n","export const yup = tag => d => (console.log(`${tag}`, d), d)\nexport const nope = tag => d => (console.error(`Oh No!! [${tag}]`, d), d)\n","import {query} from \"@onflow/fcl\"\nimport {yup, nope} from \"../util\"\n\nexport const LABEL = \"Query 1 (no args)\"\nexport const CMD = async () => {\n  // prettier-ignore\n  return query({\n    cadence: `\n      pub fun main(): Int {\n        return 7\n      }\n    `,\n  }).then(yup(\"Q-1\"))\n    .catch(nope(\"Q-1\"))\n}\n","import {query} from \"@onflow/fcl\"\nimport {yup, nope} from \"../util\"\n\nexport const LABEL = \"Query 2 (args)\"\nexport const CMD = async () => {\n  // prettier-ignore\n  return query({\n    cadence: `\n      pub fun main(a: Int, b: Int): Int {\n        return a + b\n      }\n    `,\n    args: (arg, t) => [\n      arg(5, t.Int),\n      arg(7, t.Int),\n    ],\n  }).then(yup(\"Q-1\"))\n    .catch(nope(\"Q-1\"))\n}\n","import {mutate} from \"@onflow/fcl\"\nimport {yup, nope} from \"../util\"\n\nexport const LABEL = \"Mutate 1 (no args)\"\nexport const CMD = async () => {\n  // prettier-ignore\n  return mutate({\n    cadence: `\n      transaction() {\n        prepare(acct: AuthAccount) {\n          log(acct)\n        }\n      }\n    `,\n    limit: 50,\n  }).then(yup(\"M-1\"))\n    .catch(nope(\"M-1\"))\n}\n","import {mutate} from \"@onflow/fcl\"\nimport {yup, nope} from \"../util\"\n\nexport const LABEL = \"Mutate 2 (args)\"\nexport const CMD = async () => {\n  // prettier-ignore\n  return mutate({\n    cadence: `\n      transaction(a: Int, b: Int, c: Address) {\n        prepare(acct: AuthAccount) {\n          log(acct)\n          log(a)\n          log(b)\n          log(c)\n        }\n      }\n    `,\n    args: (arg, t) => [\n      arg(6, t.Int),\n      arg(7, t.Int),\n      arg(\"0xba1132bc08f82fe2\", t.Address),\n    ],\n    limit: 50,\n  }).then(yup(\"M-1\"))\n    .catch(nope(\"M-1\"))\n}\n","import * as LOGIN from \"./login\"\nimport * as LOGOUT from \"./logout\"\nimport * as Q1 from \"./q1\"\nimport * as Q2 from \"./q2\"\nimport * as M1 from \"./m1\"\nimport * as M2 from \"./m2\"\n\nexport const COMMANDS = [LOGIN, LOGOUT, Q1, Q2, M1, M2]\n","import \"./config\"\nimport \"./decorate\"\nimport { useState, useEffect } from \"react\"\nimport { COMMANDS } from \"./cmds\"\nimport useCurrentUser from \"./hooks/use-current-user\"\nimport useConfig from \"./hooks/use-config\"\nimport WalletConnectClient, { CLIENT_EVENTS } from \"@walletconnect/client\";\nimport QRCodeModal from \"@walletconnect/legacy-modal\";\n\nconst renderCommand = d => {\n  return (\n    <li key={d.LABEL}>\n      <button onClick={d.CMD}>{d.LABEL}</button>\n    </li>\n  )\n}\n\nexport default function Root() {\n  const currentUser = useCurrentUser()\n  const config = useConfig()\n\n  const [client, setClient] = useState(null)\n  const [session, setSession] = useState(null)\n\n  const init = async () => {\n    const client = await WalletConnectClient.init({\n      projectId: \"6427e017c4bd829eef203702a51688b0\",\n      relayUrl: \"wss://relay.walletconnect.com\",\n      metadata: {\n        name: \"Example Dapp\",\n        description: \"Example Dapp\",\n        url: \"#\",\n        icons: [\"https://walletconnect.com/walletconnect-logo.png\"],\n      },\n    });\n\n    client.on(\n      CLIENT_EVENTS.pairing.proposal,\n      async (proposal) => {\n        // uri should be shared with the Wallet either through QR Code scanning or mobile deep linking\n        const { uri } = proposal.signal.params;\n        console.log(\"EVENT\", \"QR Code Modal open\");\n\n        if (/Mobi/.test(navigator.userAgent)) {\n          window.location.assign('FWC://' + uri, '_blank')\n        } else {\n          QRCodeModal.open(uri, null, { mobileLinks: ['FWC://'] }, () => {\n            console.log(\"EVENT\", \"QR Code Modal closed\");\n          });\n        }\n      }\n    );\n\n    client.on(CLIENT_EVENTS.pairing.created, async (proposal) => {\n      // this.setState({ pairings: this.state.client.pairing.topics });\n      console.log(\"[EVENT]\", \"session_created\", proposal);\n    });\n\n    client.on(CLIENT_EVENTS.session.deleted, (session) => {\n      // if (session.topic !== this.state.session?.topic) return;\n      console.log(\"[EVENT]\", \"session_deleted\", session);\n\n    });\n\n    setClient(client);\n  }\n\n  const handleSend = async () => {\n    console.log('<--- handleSend -->');\n    const result = await client.request({\n      topic: session.topic,\n      request: {\n        method: \"flow_authz\",\n        params: [],\n      },\n    });\n    console.log('<--- result -->', result);\n  }\n\n  const handleWalletConnect = async () => {\n    console.log('<--- handleWalletConnect -->');\n\n    const DEFAULT_APP_METADATA = {\n      name: \"Flow App\",\n      description: \"Flow DApp for WalletConnect\",\n      url: \"https://testFlow.com/\",\n      icons: [\"https://raw.githubusercontent.com/Outblock/Assets/main/blockchain/flow/info/logo.png\"],\n    };\n\n    const session = await client.connect({\n      metadata: DEFAULT_APP_METADATA,\n      permissions: {\n        blockchain: {\n          chains: [\"flow:1\"],\n        },\n        jsonrpc: {\n          methods: [\"flow_signMessage\", \"flow_authz\", \"flow_authn\"],\n        },\n      },\n    });\n\n    setSession(session);\n    console.log('<--- session -->', session);\n    QRCodeModal.close();\n  }\n\n  useEffect(() => {\n    init()\n  }, [])\n\n  return (\n    <div>\n      <ul>{COMMANDS.map(renderCommand)}</ul>\n      <ul>\n        {client && <button onClick={handleWalletConnect}>Wallet Connect</button>}\n        {session && <button onClick={handleSend}>WalletConnect Authz</button>}\n      </ul>\n      <pre>{session && JSON.stringify({ session }, null, 2)}</pre>\n      <pre>{JSON.stringify({ currentUser, config }, null, 2)}</pre>\n    </div>\n  )\n}\n","import {useState, useEffect} from \"react\"\nimport * as fcl from \"@onflow/fcl\"\n\nexport default function useCurrentUser() {\n  const [currentUser, setCurrentUser] = useState(null)\n  useEffect(() => fcl.currentUser().subscribe(setCurrentUser), [])\n  return currentUser\n}\n","import {useState, useEffect} from \"react\"\nimport * as fcl from \"@onflow/fcl\"\n\nexport default function useConfig() {\n  const [config, setConfig] = useState(null)\n  useEffect(() => fcl.config().subscribe(setConfig), [])\n  return config\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Root from \"./root\"\nimport reportWebVitals from \"./reportWebVitals\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <Root />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}